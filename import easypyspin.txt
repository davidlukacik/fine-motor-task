import easypyspin
import time

def main():
    # Initialize EasyPySpin
    easypyspin.init()

    # Get the first connected camera
    camera = easypyspin.Camera()

    try:
        # Activate the camera
        camera.init()

        # Set the frame rate to 120 FPS
        camera.AcquisitionFrameRateEnable = True
        camera.AcquisitionFrameRate = 120

        # Start recording for 30 seconds
        camera.start_recording(duration=30)

        # Wait for the recording to complete
        while camera.is_recording():
            time.sleep(0.1)

    finally:
        # Stop recording and deinitialize the camera
        camera.stop_recording()
        camera.deinit()

    # Clean up EasyPySpin
    easypyspin.quit()

if __name__ == '__main__':
    main()
